<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Alternative method for confidence interval approximations of derivatives — approx_deriv • INDperform</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Alternative method for confidence interval approximations of derivatives — approx_deriv" />
<meta property="og:description" content="approx_deriv implements a crude approximation for the uncertainty
around the first derivatives. It should be used complementary to the
conditional bootstrap, if problems with GAMM fittings occur
(see calc_deriv)." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">INDperform</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Datasets &amp; Functions
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://doi.org/10.1016/j.ecolind.2017.05.045">Quantitative framework for selecting and validating food web indicators</a>
    </li>
    <li>
      <a href="https://raw.githubusercontent.com/saskiaotto/cheatsheets/476bad4a8876939a7b3e1784a5bf61567ed4a715/Cheatsheet_INDperform_v0.1.0.pdf">Indperform cheatsheet</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/saskiaotto/INDperform">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../mailto:saskia.otto@uni-hamburg.de">
    <span class="fa fa-send"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Alternative method for confidence interval approximations of derivatives</h1>
    <small class="dont-index">Source: <a href='https://github.com/saskiaotto/INDperform/blob/master/R/approx_deriv.R'><code>R/approx_deriv.R</code></a></small>
    <div class="hidden name"><code>approx_deriv.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>approx_deriv</code> implements a crude approximation for the uncertainty
around the first derivatives. It should be used complementary to the
conditional bootstrap, if problems with GAMM fittings occur
(see <code><a href='calc_deriv.html'>calc_deriv</a></code>).</p>
    </div>

    <pre class="usage"><span class='fu'>approx_deriv</span><span class='op'>(</span><span class='va'>init_tbl</span>, <span class='va'>mod_tbl</span>, <span class='va'>ci_prop_se</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>init_tbl</th>
      <td><p>The output tibble of the <code><a href='ind_init.html'>ind_init</a></code> function.</p></td>
    </tr>
    <tr>
      <th>mod_tbl</th>
      <td><p>A model output tibble from <code><a href='model_gam.html'>model_gam</a></code>,
<code><a href='select_model.html'>select_model</a></code> or <code><a href='merge_models.html'>merge_models</a></code> representing the
best model for each IND~pressure pair.</p></td>
    </tr>
    <tr>
      <th>ci_prop_se</th>
      <td><p>A conversion factor for approximating derivative CIs in the
`approx_deriv` method; it is multiplied with the ratio between s.e. and mean fitted
values of the smoothing curve to represent some level of uncertainty around the
slope proportional to the uncertainty in the smoothing curve. Default is 25,
which is a compromise representing fairly well the results obtained for the GAMs
from the conditional bootstrap.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns the input model tibble with the following 4 columns added</p><dl>
  <dt><code>press_seq</code></dt><dd><p>A list-column with sequences of 100 evenly spaced pressure
             values (with the length of the time series).</p></dd>
  <dt><code>deriv1</code></dt><dd><p>A list-column with the first derivatives of the indicator
             responses averaged across all bootstraps (for the 100 equally spaced
             pressure values).</p></dd>
  <dt><code>deriv1_ci_up</code></dt><dd><p>A list-column with the upper confidence limit of the
             bootstrapped first derivatives(for the 100 equally spaced
             pressure values).</p></dd>
  <dt><code>deriv1_ci_low</code></dt><dd><p>A list-column with the lower confidence limit of the
             bootstrapped first derivatives(for the 100 equally spaced
             pressure values).</p></dd>

</dl>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In this approach derivatives are calculated
for the original smoother and some level of uncertainty (not exactly the
confidence intervals) is estimated based on the standard error (s.e.)
of the smoother. The same proportion of error (estimated as the ratio
s.e./fitted mean) is adopted for the maximal slope of the derivative and
then kept constant across the entire curve. As this results in much smaller
uncertainty ranges, a conversion (or multiplication) factor is implemented
to allow modifications of the error proportion. The default of 25 is a
compromise representing fairly well the results obtained for the GAMs
from the conditional bootstrap.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>the wrapper function <code><a href='calc_deriv.html'>calc_deriv</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Using some models of the Baltic Sea demo data</span>
<span class='va'>init_tbl</span> <span class='op'>&lt;-</span> <span class='va'>ind_init_ex</span><span class='op'>[</span><span class='va'>ind_init_ex</span><span class='op'>$</span><span class='va'>id</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>,<span class='fl'>9</span>,<span class='fl'>75</span><span class='op'>)</span>, <span class='op'>]</span>
<span class='va'>mod_tbl</span> <span class='op'>&lt;-</span> <span class='va'>merge_models_ex</span><span class='op'>[</span><span class='va'>merge_models_ex</span><span class='op'>$</span><span class='va'>id</span>  <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>,<span class='fl'>9</span>,<span class='fl'>75</span><span class='op'>)</span>, <span class='op'>]</span>
<span class='va'>deriv_tbl</span> <span class='op'>&lt;-</span> <span class='fu'>approx_deriv</span><span class='op'>(</span><span class='va'>init_tbl</span>, <span class='va'>mod_tbl</span>, ci_prop_se <span class='op'>=</span> <span class='fl'>25</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://saskiaotto.de'>Saskia A. Otto</a>, <a href='https://github.com/reneplonus'>Rene Plonus</a>, <a href='https://www.biologie.uni-hamburg.de/forschung/oekologie-biologische-ressourcen/maroeksysdyn/mitarbeiter/funk.html'>Steffen Funk</a>, Alexander Keth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


