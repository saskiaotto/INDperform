<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Diagnostic plots for a fitted GAM, GAMM or threshold-GAM(M) — plot_diagnostics • INDperform</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Diagnostic plots for a fitted GAM, GAMM or threshold-GAM(M) — plot_diagnostics" />
<meta property="og:description" content="plot_diagnostics takes a list of models of class `gam`, `gamm`
or `thresh_gam` or a mix of those and produces some diagnostic
information of the fitting procedure and results. The function returns a
tibble with 6 list-columns containing individual plots (ggplot2 objects)
and one list-column containing a plot that shows all diagnostic plots
together." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">INDperform</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Datasets &amp; Functions
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://doi.org/10.1016/j.ecolind.2017.05.045">Quantitative framework for selecting and validating food web indicators</a>
    </li>
    <li>
      <a href="https://raw.githubusercontent.com/saskiaotto/cheatsheets/476bad4a8876939a7b3e1784a5bf61567ed4a715/Cheatsheet_INDperform_v0.1.0.pdf">Indperform cheatsheet</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/saskiaotto/INDperform">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../mailto:saskia.otto@uni-hamburg.de">
    <span class="fa fa-send"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Diagnostic plots for a fitted GAM, GAMM or threshold-GAM(M)</h1>
    <small class="dont-index">Source: <a href='https://github.com/saskiaotto/INDperform/blob/master/R/plot_diagnostics.R'><code>R/plot_diagnostics.R</code></a></small>
    <div class="hidden name"><code>plot_diagnostics.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>plot_diagnostics</code> takes a list of models of class `gam`, `gamm`
or `thresh_gam` or a mix of those and produces some diagnostic
information of the fitting procedure and results. The function returns a
tibble with 6 list-columns containing individual plots (ggplot2 objects)
and one list-column containing a plot that shows all diagnostic plots
together.</p>
    </div>

    <pre class="usage"><span class='fu'>plot_diagnostics</span><span class='op'>(</span><span class='va'>model_list</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model_list</th>
      <td><p>A list with models of class gam(m) and/or thresh_gam,
e.g. the list-column <code>model</code> from the <code><a href='model_gam.html'>model_gam</a></code> output
tibble.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns a <code><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></code>, which is a trimmed down version
of the data.frame(), including the following elements:</p><dl>
  <dt><code>ind</code></dt><dd><p>Indicator names.</p></dd>
  <dt><code>press</code></dt><dd><p>Pressure names.</p></dd>
  <dt><code>cooks_dist</code></dt><dd><p>A list-column of ggplot2 objects that show the
              Cook`s distance of all observations, which is a leave-one-out
              deletion diagnostics to measure the influence of each
              observation. Data points with a large Cook`s distance (&gt; 1)
              are considered to merit closer examination in the analysis.</p></dd>
  <dt><code>acf_plot</code></dt><dd><p>A list-column of ggplot2 objects that show  the
              autocorrelation function for the residuals. NAs in the time
              series due to real missing values, test data extraction or
              exclusion of outliers are explicitly considered.</p></dd>
  <dt><code>pacf_plot</code></dt><dd><p>A list-column of ggplot2 objects that show the
              partial autocorrelation function for the residuals. NAs are
              explicitly considered.</p></dd>
  <dt><code>resid_plot</code></dt><dd><p>A list-column of ggplot2 objects that show residuals
              vs. fitted values.</p></dd>
  <dt><code>qq_plot</code></dt><dd><p>A list-column of ggplot2 objects that show  the
             quantile-quantile plot for normality.</p></dd>
  <dt><code>gcvv_plot</code></dt><dd><p>A list-column of ggplot2 objects that show  for a
             threshold-GAM the development of the generalized cross-validation
             value at different thresholds level of the modifying pressure
             variable. The GCV value of the final chosen threshold should be
             distinctly lower than for all other potential thresholds, i.e.,
             the line should show a pointy negative peak at this threshold.
             If this is not the case, e.g. the trough is very wide with similar
             GCV values for nearby thresholds, the threshold-GAM is not
             optimal and should not be favored over a GAM despite the better
             LOOCV (leave-one-out cross-validation value).</p></dd>
  <dt><code>all_plots</code></dt><dd><p>A list-column of ggplot2 objects that show all
             five (six if threshold-GAM) plots together. For this plot,
             drawing canvas from the <code>cowplot</code> package were added
             on top of ggplot2.</p></dd>

</dl>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function can deal with any model of the classes `gam`, `gamm` or
`thresh_gam` as long as the input is a flat list. That means:</p><ul>
<li><p>If only one model is provided as input coerce the model explicitly
        to class `list`. An input such as model_gam_ex[1, "model"] will not work
        as the class is a tibble. Use instead model_gam_ex$model[1].</p></li>
<li><p>If the input are one or more threshold-GAMs selected from
        the <code><a href='test_interaction.html'>test_interaction</a></code> output (variable <code>thresh_models</code>
        the model list features a nested structure:
        each IND~pressure pair (row) might have more than one threshold-GAM.
        To remove the nested structure use e.g. the <code><a href='https://purrr.tidyverse.org/reference/flatten.html'>flatten</a></code>
        function (see examples).</p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://rdrr.io/r/stats/influence.measures.html'>cooks.distance</a></code>, <code><a href='https://rdrr.io/r/stats/acf.html'>acf</a></code>,
<code><a href='https://rdrr.io/r/stats/acf.html'>pacf</a></code>, <code><a href='https://rdrr.io/r/stats/qqnorm.html'>qqnorm</a></code>, and
<code><a href='https://purrr.tidyverse.org/reference/flatten.html'>flatten</a></code> for removing a level hierarchy from a list</p>
<p>Other IND~pressure modeling functions: 
<code><a href='find_id.html'>find_id</a>()</code>,
<code><a href='ind_init.html'>ind_init</a>()</code>,
<code><a href='model_gamm.html'>model_gamm</a>()</code>,
<code><a href='model_gam.html'>model_gam</a>()</code>,
<code><a href='plot_model.html'>plot_model</a>()</code>,
<code><a href='scoring.html'>scoring</a>()</code>,
<code><a href='select_model.html'>select_model</a>()</code>,
<code><a href='test_interaction.html'>test_interaction</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Using some models of the Baltic Sea demo data:</span>
<span class='co'># Apply function to a list of various model types</span>
<span class='va'>model_list</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>all_results_ex</span><span class='op'>$</span><span class='va'>thresh_models</span><span class='op'>[[</span><span class='fl'>5</span><span class='op'>]</span><span class='op'>]</span>,
  <span class='va'>model_gam_ex</span><span class='op'>$</span><span class='va'>model</span><span class='op'>[</span><span class='fl'>39</span><span class='op'>]</span>, <span class='va'>all_results_ex</span><span class='op'>$</span><span class='va'>model</span><span class='op'>[</span><span class='fl'>76</span><span class='op'>]</span><span class='op'>)</span>
<span class='va'>plots</span> <span class='op'>&lt;-</span> <span class='fu'>plot_diagnostics</span><span class='op'>(</span><span class='va'>model_list</span><span class='op'>)</span>
<span class='va'>plots</span><span class='op'>$</span><span class='va'>cooks_dist</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>plots</span><span class='op'>$</span><span class='va'>acf_plot</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>plots</span><span class='op'>$</span><span class='va'>pacf_plot</span><span class='op'>[[</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>plots</span><span class='op'>$</span><span class='va'>resid_plot</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>plots</span><span class='op'>$</span><span class='va'>qq_plot</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>plots</span><span class='op'>$</span><span class='va'>gcvv_plot</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span> <span class='co'># for threshold models</span>
<span class='va'>plots</span><span class='op'>$</span><span class='va'>all_plots</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span> <span class='co'># shows all 5-6 plots</span>

<span class='co'># Make sure that thresh_models have not a nested list structure:</span>
<span class='va'>model_list</span> <span class='op'>&lt;-</span> <span class='va'>all_results_ex</span><span class='op'>$</span><span class='va'>thresh_models</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>:</span><span class='fl'>6</span><span class='op'>]</span> <span class='op'>%&gt;%</span> <span class='fu'>purrr</span><span class='fu'>::</span><span class='fu'><a href='https://purrr.tidyverse.org/reference/flatten.html'>flatten</a></span><span class='op'>(</span><span class='va'>.</span><span class='op'>)</span>
<span class='va'>plots</span> <span class='op'>&lt;-</span> <span class='fu'>plot_diagnostics</span><span class='op'>(</span><span class='va'>model_list</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://saskiaotto.de'>Saskia A. Otto</a>, <a href='https://github.com/reneplonus'>Rene Plonus</a>, <a href='https://www.biologie.uni-hamburg.de/forschung/oekologie-biologische-ressourcen/maroeksysdyn/mitarbeiter/funk.html'>Steffen Funk</a>, Alexander Keth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


